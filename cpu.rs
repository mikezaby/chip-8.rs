struct Cpu {
  opcode: u16,
  memory: [u8, ..4096],
  v_reg: [u8, ..16],
  i_reg: u16,
  pc_reg: u16,
  stack: [u16, ..16],
  sp: u16,
  delay_timer: u8,
  sound_timer: u8,
  keypad: [u8, ..16]
}

impl Cpu {
  pub fn new() -> Cpu {
    let mut cpu = Cpu {
      opcode: 0,
      memory: [0, ..4096],
      v_reg: [0, ..16],
      i_reg: 0,
      pc_reg: 0x200,
      stack: [0, ..16],
      sp: 0,
      delay_timer: 0,
      sound_timer: 0,
      keypad: [0, ..16]
    };

    for i in range(0, 80) { cpu.memory[i] = fontset[i]; }
    cpu
  }

  }

  pub fn emulate_cycle(&self) {}
}

static fontset: [u8, ..80] = [0xF0, 0x90, 0x90, 0x90, 0xF0, 0x20, 0x60, 0x20, 0x20, 0x70,
                              0xF0, 0x10, 0xF0, 0x80, 0xF0, 0xF0, 0x10, 0xF0, 0x10, 0xF0,
                              0x90, 0x90, 0xF0, 0x10, 0x10, 0xF0, 0x80, 0xF0, 0x10, 0xF0,
                              0xF0, 0x80, 0xF0, 0x90, 0xF0, 0xF0, 0x10, 0x20, 0x40, 0x40,
                              0xF0, 0x90, 0xF0, 0x90, 0xF0, 0xF0, 0x90, 0xF0, 0x10, 0xF0,
                              0xF0, 0x90, 0xF0, 0x90, 0x90, 0xE0, 0x90, 0xE0, 0x90, 0xE0,
                              0xF0, 0x80, 0x80, 0x80, 0xF0, 0xE0, 0x90, 0x90, 0x90, 0xE0,
                              0xF0, 0x80, 0xF0, 0x80, 0xF0, 0xF0, 0x80, 0xF0, 0x80, 0x80];
